<!DOCTYPE html>
<html lang="en" style = "width: 100%; height: 100%; margin: 0; padding: 0;">
<head>
    
    <title>Shopping list</title>
</head>
<body onkeydown="keydown1(event,this)" onmouseover="msOver()" onmouseout="msOut()" style = "width: 100%; height: 100%; margin: 0; padding: 0;"><!-- -webkit-app-region: drag;"> -->
    <div style="width: 100%; overflow: hidden;">
        <div style="width: 600px; float: left; position: relative;"> 
            
            <webview id = "yt-player" src = "startPage.html" style = "width: 100vw; height: 100vh; position: relative; z-index: 4000"></webview>
        </div>
        <!-- <div style="width: 600px; float: left; position: relative;"> 
            <iframe id="iframe" src="https://www.youtube.com/embed/F1geJWP4Yvs" style = "width: 100vw; height: 99vh; position: relative; z-index: 4000" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div> -->
        <!--<div style="float: bottom; position: absolute; z-index: 999999;"> 
                
        </div>-->
        <div style="float: top-left; position: absolute; z-index: 9999999;"> 
            <div>
                <button type="button" id = "drag" tabindex="-1" style="position: absolute; top: 10vh; width: 10vw; height: 10vh; background-color: #ff0000; border: none; opacity: 0.5; background:rgba(255,0,0,1); color: white;   -webkit-app-region: drag;"><span>...</span></button>    <!--onmousemove="msMove(event) onmouseover="msOverDrag(event)" onmousedown="msDown(event)" onmouseup="msUp(event)" onclick="drag()""-->
            </div>
            <div>
                <button type="button" id = "btn" tabindex="-1" style="position: absolute; top: 40vh; width: 5vw; height: 20vh; background-color: #ff0000; border: none; opacity: 0; background: linear-gradient(to left, rgba(255,0,0,0),rgba(255,0,0,1)); color: white" onclick="openWindow()"><span><</span></button>    
            </div>
        </div>            
        
    </div>
    
    
    <script>
        const electron = require('electron');
        const {ipcRenderer} = electron;
        
        var dragMove = 0;

        // ipcRenderer.on('openVideo', function(e, path) {
        //     const webview = document.getElementById('yt-player');
        //     const loadPage = () => {
        //         webview.loadURL(path);
        //         webview.removeEventListener('dom-ready', loadPage);
        //     };
        //     webview.addEventListener('dom-ready', loadPage);
        // });
        function keydown1(evt,t) {
            ipcRenderer.send('keydown1', evt.keyCode);
        }

        function msOverDrag(e) {
            var drag = document.getElementById("drag");
            drag.style.opacity = 0.75;
        }

        function msDown(e) {
            //var drag = document.getElementById("drag");
            //drag.style.opacity = 1;
            //ipcRenderer.send('msDown');
        }

        function msUp(e) {
            //var drag = document.getElementById("drag");
            //if(dragMove == 1)
            //    drag.style.opacity = 0.75;
            //ipcRenderer.send('msUp');
            //dragMove = 0;
        }

        function msMove(e) {
            // var btn = document.getElementById("btn");
            // btn.style.opacity = 1;
            // dragMove = 1;
            // ipcRenderer.send('msMove');
            //console.log(x + "," + y);
        }

        function msOver(e) {
            var btn = document.getElementById("btn");
            //var drag = document.getElementById("drag");
            btn.style.opacity = 1;
            // if(drag.style.opacity < 0.5) {
            //     drag.style.opacity = 0.5;
            // }
        }

        function msOut(e) {
            var btn = document.getElementById("btn");
            //var drag = document.getElementById("drag");
            btn.style.opacity = 0;
            //drag.style.opacity = 0;
        }

        function openWindow(e) {
            var iframe = document.getElementById("yt-player");
            ipcRenderer.send('openWindow', iframe.src);
        }

        function webClick(e) {
            console.log(e);
        }

        function drag(e) {
            var drag = document.getElementById("drag");
            
        }

        ipcRenderer.on('element-clicked', function(e, path) {
            //console.log(path);
            var iframe = document.getElementById("yt-player");
            //mainWindow.webContents.send('openVideo', path);
            //console.log(iframe.src);
            // alert(iframe);
            iframe.src = path;
        });
        
    </script>
    
</body>
</html>